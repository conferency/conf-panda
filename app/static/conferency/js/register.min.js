var validity=0;var validitied_email="";$(document).ready(function(){var b="/api/check_email";$("#email").blur(function(f){document.getElementById("email").checkValidity();if(document.getElementById("email").validity.valid){a($("#email-error").html("").parent());d($("#email").val())}else{c($("#email-error").html("Invalid email address.").parent())}});function d(f,g){$.ajax({contentType:"application/json",method:"POST",url:b,data:JSON.stringify({email:f})}).done(function(h){g=typeof g!=="undefined"?g:jQuery.noop;console.log(h);validitied_email=h.email;if(h.code==200){validity=1;a($("#email-error").html(h.message).parent())}else{validity=2;c($("#email-error").html(h.message).parent())}g()},"json")}function c(f){f.addClass("has-error")}function a(f){f.removeClass("has-error")}$("form").submit(function(f){console.log("Form submitting... Email validity:"+validity);if(validity==2){f.preventDefault();if(validitied_email!=$("#email").val()){d($("#email").val(),$("form").submit)}}else{if(validity==0){f.preventDefault();d($("#email").val(),$("form").submit)}}if($("#password2").val()!=$("#password").val()){f.preventDefault();c($("#password-error").html("Passwords must match.").parent());console.log("Password mismatch.")}$.each(e,function(g,h){if($(h).val()==""){f.preventDefault();c($(h+"-error").html("This field is required.").parent())}})});var e=["#email","#firstname","#lastname","#password","#password2","#organization","#code","#location"];$.each(e,function(f,g){$(g).attr("placeholder",$(g).attr("placeholder")+" *")})});