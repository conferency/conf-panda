var initializeDropZone = function (acceptedFiles, maxFiles, uploadedFiles, pdfUrl) {

    var showModal = function () {
        var paperFile = this.file.realname;
        var paperId = this.file.id;
        if (this.file.type.match(/.*pdf.*/)) {
            var pdfModal = $("#Modal_pdf");

            pdfModal.find("iframe").attr("src", "/paper/viewer?file=/" + pdfUrl + paperFile);
            pdfModal.find("a").attr("href", "/paper/download_doc/" + paperId);
            pdfModal.modal("show");
        } else {
            var wordModal = $("#Modal_word");

            wordModal.find("a").attr("href", "/paper/download_doc/" + paperId);
            wordModal.modal("show");
        }
    };

    var myDropzone = new Dropzone(document.getElementById("dZUpload"), {
        url: "/paper/uploadfile",
        paramName: "paper",
        maxFilesize: 15,
        uploadMultiple: false,
        acceptedFiles: acceptedFiles,
        maxFiles: maxFiles,
        addRemoveLinks: true,
        autoProcessQueue: true
    });

    myDropzone.files_list = [];

    myDropzone.on("success", function (file, response) {
        var fileID = response.id;
        var fileName = response.filename;
        // var selector = $("input[name=filename]");
        file.previewElement.classList.add("dz-success");
        file.id = fileID;
        file.realname = fileName;

        myDropzone.files_list.push(fileID);

        $(file.previewElement).on("click", ".dz-details", showModal.bind({file: file}));
    });

    myDropzone.on("removedfile", function (file) {
        if (file.status !== "error") { // If a file is error (like unaccepted filetype, the backend will error.
            myDropzone.files_list.pop(file.id);

        }
    });

    myDropzone.on("addedfile", function (file) {
        if (!file.type.match(/image.*/)) {
            if (file.type.match(/.*pdf.*/)) {
                this.emit("thumbnail", file, "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAC0ZJREFUeNrs3UuMFGUCwPGvuodhgGFYnjGCwfd7ozEK0ZPgK6KrrlExbjTx4MELe+BivOnJI3HVRD2o6CYS8ZFoRF2fK7JqogZijBIEXwgoICoOD+mqreqZdV1ZtbqZnqmZ7/dLKk1kkOKrqn9XVVdVJ1mWBSBONUMAAgBEqKuqM5YkyU+/3r548bT8ZUk+XZFPJ+bTeItueHXPnr281t19U+8dd+w3Gq2r6qF2UtkZGwxAvvH/KX9Znk9/sBqNnJ65cz8OtdoH+S+vEoGxE4BKHwIMbvxP2fgro1geK3ffcku3oXAOoNMb//T85eHgPEUVI7Aqj8BEQyEAnfTXfJpiEVXSwnx6RgQEoJOusHgqbYEICEAnHW/xiADxBsBHfSJAxAFABBAARAABYDRFYLKhEADijcCLeQR8hCsARGpePr0gAgKACIiAACACCAAigAAgAggAIoAAEFkE/pFHYKahEADidFY+vSwCAkC8ThUBAUAEREAAEAEREABEAAFABBAARAABIMII/DOPwBxDIQDEqfjqt1dFQACI1zEiIACIgAgIACIgAgKACCAAiAACgAggAEQYgX/lETjWUAgAcZozuCcgAgJApGaLgAAgAiIgAIiACAgAIoAAIAIIAPFG4ARDIQDEG4HVeQT+aCgEgDjNCANPFhIBAUAEEABEAAFABBAARAABQAQQAGKLwJmGQgCINwIv5RGYbygEgDj15dMLIiAAiMB8AQAREAAQAQEAERAAEAEBgPgisFAAIN4IPBNTBAQA/teEmCIgABBxBAQAIo6AAEDEERAAiDgCAgARR0AAoHwEVuURuEwAIE7d+bRyLEVAAKA148ZSBAQAIo6AAEDEERAAiDgCAgARR0AAYOgi8GcBgLgj8BcBgDgV29Py0RQBAYCIIyAAEHEEBAAijoAAQMQR6LKMKOOHrVt7+rNsk5FoQ5bdPimEvwsAo1Z9377Z9TQNe/KJsbWLAqVMrNXChJpVRgAQAQQAEUAAEAEEABFAAIguAhNFQACI1wQREABEQAQEABEwEAKACCAAiAACgAggAIgAAkBsEZgkAgJAvHpEQAAQAREQAETAQAgAIoAAIAIIACKAABBhBHrrdQMhAMRqfJKIgAAgAiIgAIgAAoAIIACIAAKACCAAiAACQFwRmJxHIDEUAkCcugf3BERAABABBAARQAAQAQQAEUAAEAEEABFAAIgmAq4TEAAiNk4EBAAREAEBQAREQAAQAQQAEUAAEAEEABFAAIgtAn0iIADEq0sEBAAREAEBQAREQAAQAQQAEUAAEAEBgEgjUEsSAYBYIzC5Vos6AgKACEQcAQFABCKOgABAxBEQAIg4AgIAEUdAACDiCAgA/EoE+iKIgADAr6hHEAEBgIgjIAAQcQQEACKOgABAxBEQAIg4AgIAEUdAAKDNCEyp15uvAgARKjaevlEeAQGAiCMgABBxBAQAIo6AAEDEERAAiDgCAgARR0AAoEMb1mi4TkAAoEOSURABAYBhiIAAQMQREABAAAABAAQAEABAAAABAAQAEABAAAABAIZQlyFoQ3F314QJ7f/5/ftDOHBgaOdp4sT2/+yPPw5Mw7bW5atdd3dn/45OjLEA0JRv/F3Llg3JSpp9+20IO3eG7MsvQ7ZpU8g+/DCEXbtaX5BDMT+NRgj9/QPzlE/Z1q0hFPP1ySch++KLELJsaHY7zz031K65pqOLKH3wwZCuWWNdFYAKy98Fk5kzQ8in5IQTQliwoPmfs40bQ/rqqyF7++18TU6Hb36K21YnTw5JPoU5c0Jyyin//b3du0P2wQchfeut5mszFggAHTjCOProUM+nbNGikD7ySMjWrx/5mertDcm8eaGeT8UeS/riiyF97bXhPXRgyDkJWOUQHHZYqC9dGmoXXlitGZs2rbkLX7/ttpCceqoFJQB0rgJJqF11Vaidf371Zm3GjFBfsiTUrr46X5OsSgJA5xZUvpElxx5bzXm74IJQv/nmgbP7CAAd2hO47rqBjyCrOHunnRbqN95Y2fnj/5PsDso++yxkL7/8s9zmve3pCWHq1JAccURIjj++pV3nZPDMfPb+++3N0N69Idu+/aCwJMU89faGMH78oUXgrLNCbdOm5gnCIRm/r78OYd++9v7sDz9YAQVghBVny3/rs+i+vlC7+OJQW7iw9Dtnbf780GgzAMU1Bo177vn1H5g0KSRz54bkpJNCcuaZIZk+vfVdyiuvDNm6dSH76qtDHr50+fKQffSR9cghwBj13XchXbEiNB54oPy77Mknd25+8nfN5mf9jz8eGrfeGhr33tv6htzVNXBSEAGg5Dvzm2+G7N13y/1wcZHOtGnDMFNZyN55JzRuvz2kb7zR8vmA5PDDLVgBoPTu7s/PFfzeBtbGrnnb9u8P6UMPhfT551uLwOBVjQgAZd5wN24sf619fqw+7IF64onmHkHpFeuMM3wiIACUVty5tnt3uZ8dN24ECpWFxsMPl5/H4p6Co46yXAWA8kuj5OIYqevv+/tDumpV+cOAY46xTAWAUor748vu2pd9F+7EocDq1aXvs0+OPNJyFQBKbSzF7cBl98a3bBm5Gd2zZ+CZBWXMmmXBCgClFsR555Xf+Ef4Krdsw4ZyUZs61YKtOFcCVmHjX7Cg9AU+2Xvvjfj8lt4D6es7tHG54Ya2LgVO77tv4GlGCECld/tnzgy1Sy8Nydlnl1yz05C1eFFOR3zzTfmfLT6xaPOkZfNpSe0YiU9JBICDFBv4L+/jL264mTJl4Jr74iRZC5+Vp6+/PnCDzEhr5WGbhxAABGB0v8PPnh2SoXr4ZXFj0ZNPVuQf1sIFPsP5TENaP8wyBKPA/v0Dd/H191djflrZxd671/KzB0Db8g2oceedzWcLVEbZexH27LH8BIB2ZZs3h7S4JbdiZ7TL3umX7dhhIQoA7bzrF3ffNe/Aq+C32xSPLS9lCB4KggDE846/ZUvI1qxpnu2vzPH+L/X0hOS448r9ezZtOqS/qnHXXaUvOnLeQQCqpzgD/ssLWQa/hy8rjo+Lr9/ati2Ezz9vPvrqoOf1VVDtnHNKP/03+/jjQ/vLirGraggFgN/dANat++1n8I0248aV/5KS778feMYB1Q66IaD0ynLZZaUfR5YWjzhzDYAAMDYkp59e/t2/eJ5gC484QwCo+MZfv+mm0lcAZmvXjuwtyzgHwFCsHV2hdsklobZoUfnLfw8cCOnKlcZOABi1JkwItXnzQnLRRc0vAG1F+uyzQ/KlIAgAQ6239+AnDxXv7MVn+8VXg82aFYo7FJtfQtrGF30WTwoqAoAAUMVj+XzDri9d2pH/d3HM37j/fmf+RxknATn0jT/f5W8sW9b87B97AMS08W/YEBp33z3izylEABhO+a5++txzIX366RAaDeMhAETzrr9+fUgfeyxkn35qMASAOLb6rHlvQ/rKK82vEEcAGOt2727e0tvc8NeuDWHXLmMiABS386YvvfT7P7d58/AdkpeZn99S3Hpb3Kpc3KK8c2cI27Z17Ik+xePNSs1vK48fpy1JVvYrqYfZjmuvzSwexorpjz5aye9Kdx0AREwAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQACAWAKwz+JhjNgnAK1bb71hjFgvAK170nrDGPGEALTuznz61rrDKLcrn/4mAC2asWLFjvzl+nxKrUOMUsW6e/3guiwAbUTg6fzl8sGKwmh75788X4efqfJMJlmWVXPGkuSnX29fvHha/rJkMAYn5lOP9YsK2ptPH+bTU8UhbL7xf/Of36jsdlbVGQMiPwQABADokH8LMADq91HZKrUSBAAAAABJRU5ErkJggg==")
            } else if (file.type.match(/.*docx.*/)) {
                this.emit("thumbnail", file, "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAFY1JREFUeNrsnQl0XXWdx/8vW5O0TZesbbrvFQpSwbLZsiijjFhERgREBxXlCKIePGcGGEfHZdAZ53BExHGEYQDFGYaRYZGlIHQoO9KyFWhLutGmaZq0SdqkTdM08/9eEn1Nk7zffXkvfXn38+m55/W0Ly/33Xv/n//v//tvsa6uLgcA0SSHSwCAAAAgguRl6onFYrE//X3R07eM8y9X+eNcf8zzRyG3bmgpLSy8Iy8n57L7F160n6sRnkxtascy9sS6BeAL/8f9y53+GMtjdOSoKCqq8ffkTf/X85FA9gggo5sAvvCf41/uo/BnDLof93xi5V0FXApyAOku/KXdNT95CiQAEYwA1OYfwy3KWAk85CVQzKVAAOnik9yejOZMfzyIBBBAupjD7cl4TkcCCCBdjOD2IAGIrgAACQACACQACACQACAAGDYSKOFSIACIrgQe8xJgHAcCgIjyQX8sQwIIAJAAEkAAgAQAAQASAAQASAAQACABQAAQMQk84SVQzqVAABBNFiIBBADR5mgkgAAACSABBABIAAkgAEACgAAACQACACQACAAiKIHnvAQmcSkQAESTmf5YjgQQACABJIAAAAkAAgAkAAgAkAAgAEACgAAgghKYwaVAABBdCTzlJTCLS4EAIJpUd0cCSAABABIABABIABAAIAFAAIAEAAEAEgAEAFGSwAovgQVcCgQA0aTKvbeoCBJAABBRypAAAgAkgAQQACABJIAAAAkAAgAkAAgAoiuBY7kUCACiKwFNJV7EpUAAEE1K/LEMCSAAQAKLEAAAEkAAAEgAAQAgAQQAgAQQAED0JHAaAgCIrgQe8hI4AwEARJMifzwYFQkgAIAISwABAERYAggAIMISQAAAEZYAAgCIsAQQAIBdAg97CXwCAQBEkwJ/3JNNEkAAAOHIzyYJIACACEsAAQBEWAIIACDCEkAAABGWAAIASJ0EPoUAAKIrgbu9BC5GAADRROXpjuEkAQQAEGEJIACACEsAAQBEWAIIACDCEsjjHoGFXa1thbH2Axu4EuHpcu57/uU3CACGLR05sWoX849yewcXI8tCFAAbhQXOjcjnOiAAQAKAAAAJAAIAJAAIAJAAIACInAR0AAKAiKIoAAkgAEACgAAACQACACQACACQACAAQAKAAAAJAAKASEmgCAkgAIguBUgAAQASQAIIAJAAIABAAoAAAAkAAgAkAAgAoiiBEVo1FxAARFMCeS5WjAQQAESXfCSAAAAJIAEEAEgACSAAQAKAAAAJAAIAJAAIAKIogULnYjGuBQKAaEogNxgshAQQACABrgUCACQACACQACAAQAKAAAAJAAIAJAAIAKIjgWIkgAAguuQhAQQASAAJIABAAkgAAQAS4FogAEACgAAACQACACQACACiJoGRSAABQHTJRQIIAJAAEkAAgASQAAIAJMC1QACABAABABJAAABIAAEARE4C0d53AAFAxCWQE2kJIACACEsAAQBEWAIIACDCEkAAABGWAAIAiLAEEABAfxIY5SWQE0MAAJEkpzsSyGIJIACACEsAAQBEWAIIACDCEkAAABGWAAIAiLAEEABAhCWAAACSlkDRe68IACCKEoh1RwI5CAAACSAAACSAAACQAAIAQAIIAAAJIAAAJIAAACIigVGZLwEEAJAuYpkvAQQAkHYJFCEAgOhKgCYAACAAAEAAAIAAAAABAAACAAAEAAAIAAAQAAAgAABAAACQUvKy5YuMyMl1+bHkfHawy7m2gx2ZfaP8d5tVNNbNLBzrJhSMchUFxa4glutG5ua7jq6Dbv/BTtd0YJ/btr/VbW5vcW+2NbrmA+0Zc94z/HlXFox0lfnFrjAnzxX5IycWc62dHa7L/2ny59rYsdc1HtjrNu5rcRv2Nbt9Bw8c8lkx/2dkrv2RPdDVddhnhEHnmRezDeRv7TwQfA8EcIT42sSF7iPjpg36c/b4B1IFp6nTF6b2VrexvTl4GFe3Nri9g3iYkpXaqSWT3JKxk91xoyqCAh8GnfeTTZvdE/7Y0dE2ZOddklvgPjRmsj8muaNHliUlZhWm9f78X2jZ5pY3b3abvBQ0xf6GmWe4KSNKTJ+h+3jJmt+7di/HsEhQt889243JG5Hwve+273aXr1sWCAcBDHNG+RpVR7Ub5Y4qLouLErrc23t3uqea33XLm951u3xtmy6Kc/LdeWWz3VJ/qDAly/TCMW561QL3ucqjAgncuX21q0+jCBSZfLp8rvvwuKmhZdUb1faKdnSU5xe5n2x5yXX6e3Bz7Sr3o+lLTJ+hwnv2+Bnu3oZ1oX//X/nvYSn84qbalb7wH6QJkNXJEh8Kvq+4NDi+XHVsUKD+a8fbQbidShb7WvPyCe93pfmpm0OuMPwsHx0t8bXynfWr3T071qY0XFVteVHF+wJp5cXSm1ZatafePd28xZ3qr5OFT5XNcQ801oQqoOPyCoOfs6AI6xV/TsP2uaZoJycD1XK/nH2Wu2zCMUFbcbCoxvxG9fHuuiknpbTw925SfKnqGPeDaacOKrKIZ1bROHfz7I8ENX+6C38Pv9z2qtvfZQvry/OLQzcNL/Yys9xT5Y10LsP6WaY4D04E55fNdTfOPNNN9OFvsiiRd/30xe5j46cPyXkfP7rK/fOM09x4X9MNBkUUP/Vt8sF892RQM+buHWvM77/AyynXmMzTd1GzwcJ/1L2R1qYgAhgmTC0scT+b9eGgzZ1M+Hz9tMVBsmwomebPVRIYnWQk8PHSme6aKScOWa3fm7t988uaz1BuYrGXlYVLqxaYZFGzr8k9sLNm+FdiFN/UoMThj6cvcZNGjA4VQVzrC9Hc4vFH5Jx1rt+ZenLoQnz62ClBr8uRXOlKmf0w4fdFFfMTnu8c35xZbMgtKHty49aXg8TwcCdySUAl7XonhIpy8n2bLzdI/gwGZY2/7dvwV9X8wdT19Fnf1vzg6Amhf4/6ttfu3eXq9rcG/ehqQlQWFPsHeHwQUYRhwcjyoM17+/Y3TO+fX1zqvjXphKSvUUPH3uAeqM9fXa5qa+v8lZOYWTQ2VESiZKCSguoiTYS6Dk8qqXbPtmzt9z1frDrG9Hsf3rnevd22MyvKQ+QE8Hcbn3bbfcHp82L4mnCyrxVVKE4qmegfrMrQtZxCaxXsW+teT1jbXFg+P9Rnv9XWGPQ8vLS7rs+sts5fQlFtN9t/vpXPlM9zz/iC8Y6XSqIo59okwn5d7/sba9yKli39XvselLT7gL/uGkOg658oHFe3oJKxOYaw/cKKef0KQHmR9xtEorEF/57g3iKAYYoKlQbP6Li/8R1XPWKU+1zF0e60sZNDfc55ZXPcQ76W2NbPw65H9QofQucYE1M6r5trX/GfWTNg553epwf8uZZa9xn/sP915dHmpshlvvb7mw3/N+D7vuDfU+ELqBUNnLq17rXgWnQaw2UNWHpk14bgUG+IuuMUnQ0U0d3n79Uny2Yn/GxFSCrof/QCPfR+xHztv8B0fhL77s79WfPMkwMYgK3te9z17z7vvrvpmVBDhVVDnjdAP/IpvnabZ2z3q1B/20ctv09Q+A9to3a539a/5f5ly0vmc1btp8inPzSU9+wQvRQaHffVdY8FffCdSbaV1Uz4N9/Ol/wGQmMbmozDni/w0U5vzhg7Jfh+iVjd1uCWeTFlEwjAgGrUq2uWh5KA+p77a49bB5mIn2592a3csz2p8162a2OoUXBLS2f1+38XB0k0W8SiWvnq9U+62v17UhaZDYTyILcZw/JjvOTiR3hK1p+vPCrhzynh97OtK11Xlj3bCMDI+n1N7nubnjM/ACr8J/hws6+aVKMJreJRIR4Maq9au8tOLqkO2vm9qSoY6aOWatNnqDBet2HFkE9EetRfp7V7bYk55Uh6+MvxM4JJSom4t3Fd0DR0CCC6rPI18QO+vWnlxJKJh/3bYuMQVonmV3WDH2WmEXN31b9peq8Sbif00Stx5tip5tr/X7e9ktb5BgM1e35eu8r0XuUBlN8R5wwQ9cQ3RTSPIhtBACH5tS9M1mGo8/uo6fuSQt+1/9YgB5EKNG/B2nzpq0vNKi3VkI/t2nTE7o265qwR00fHTQ/uz2TDuA1JbahngiKADEWhrWYDWtCw0lFx/drq77aOFvyDL7SpQmMSXmypM713XtGh0tJw4WnGc/7fhnVHfE68mjwW2WkykZJ/iXjZR31PNW/J2ucZASTBQINJ+pJAD3OLbJl/FaJVSSb++uO1VtuMtSmFow/p559nzFco0/90iOuSLjQ2/9fb3zTdl7MSTBLSQis/r12Z1c8yAkiCN1obzO/Vyj09TDYOE1YXmpJpqWRdgkE+PaitXx43G9E6oEifvydD+sc1LkDXMBGJZvxpvkGqmmEIIIvQQBDrLLBxcYtKxMsgkQBSTW2CEXjxxE9HrjJkyEXNvl0Zc3/UbfgLY0KwPzSI6z/r3876ZxkBJIkywxbiw+nSvKKUfnYYVDt3GBfFGJnz567ASqO06kIIZihQ2/3ZQTRJFPpbk70IIIK0GbPCxXGFybpwSLqGmrYbzzleWtbJRU0ZsABpb8IsHBKP5kW8tLsuEs8xAkiSmLnQ/fkBHJFjWycvXXl0q7S6+okGhhsaj5BMZJKOCAwBZBnWaasdcTWQdV26/DQtslFsrM3jzzMWiw3be6ShzdYVhOM5p3RmqNmUCCCCjDeu29cSF85b2+CpWq+vN9YmSHw/unVd/bGDXEsh1Wh4r3U25OHRXcxdVf0B8+hHBBAxtHCItZDGz39vMbaTK4yZ9zBosRLrPP6GuBB4n3FN/aqC4oy6R1/3BXgwi7VqvQZFAggADsM6mUfEz4izjpGfmkTYmghrKKxBSPECaDCe86zCzAmZtWKzFhWx5jn649Kqowe9cCoCyEKs4/lV+8dnx63TY8t886IyxVGAVVqb9+0+JAewfb9NAHOKx6Wt6RI20tG+Col4ZOd6Q84k333F8FkIIELoobBOjnmj7dARg2vb7INlTho9MaXnfXwfU5P7Yk2vKbWaBm1tN59mGFufbr464ThTgvbBnTWmTV20GtTCBNEEAogQ55fPMbctn22pPaw5YO0v/2gK9whQNDHQaj/x9J6DsGavffFLLcuVewR7DRaNnmBavk37DL6zt8k9bpy5+LXqhYPe6gwBZAEay6894yxo+uhLu7cd9u/P7641/bxmDVqbGon4dNlcUz5bE3pe7DUAZrMvLA3GfnFNsFlaOvuI3BtFZiqoFn67463gVes+thgGXel7XVAxDwFEGU3l/fupJ5trgkd3behzafCnjFOJhdqyRYPcdkxbc1t3unnRC6v3hB4ly55rqTX/vi9ULQi2CxtqlLArNyxYqpWPl3dPtZakrYulaC3BMHs+IIAsQm1K7d5jzaQrifa7ftbiW7mn3jzDbIIP3a+edELS/dFKiGmvQevqw/c19n3Oj+xab/6dGsT0/Wmnmmc+pgIlOC0r+4hb6l4/pAdAi5Zaemf0va6cuBABRA0tIqnNL8Ps3vO7hrX9rn+vbrZ7Guz72ml9/KsnHR96LX6NVfjHaR8y79unPQf62+VW7eUwU6DVdXbDzDPMiceBUH/8xwaIYFQwv+mvj0VxWly1d45Dsr7DuNyXVks6PQMSnQggzajG1V592jZL++eFWQtf00h/U/9WwuZBmG3FtcKwCpQltI51S+MXXlphQvFb6l4bsG/8tu3hNsNQ1PRDL6C/nbwodOisQq0Ve340fXGw5+JRA3RhXlgx3xSZ6btpj4K+UDJQiUELX5lwbNAczBYitzHIfF+TV/Yq0MW5720NVpk/Mli195hR5UkNANFQ3x9sfi7h8NnO7iWm/2nGEnN4r5rwJl8YVIOtaN7i1rTtDEJXRRTKS1QHOxqVBTVU2PHv2nMgUQ2v/3/St53D1oB6v7oHV/ufV1JUvQq1wZZm7+Ua1KOiZdPU3NG1V6SlqMuS+9BSZX2t898XOndFMv1FZRLcd6eeYoqsLq1c4G7KkpWCIieAayafmJbP1UP0ky0vJtxeq4fXWncEC05cWGHfHkyqUJ90KvulFYlYN9m8qXZV0J1YZpwHEX/eiqhSuQOyxPnNalvTSGF+or0PlejUxh/xewb0h3ZGXhZiGXKaAFmOCv8NW142Lxbawx31q4O550cKLXCqXYfajeP91UPwD5ueNb8/nZxbNsu8u5ISfZZpwdY9/yS0r1fbt3ZDAFmMwv3vbHwmaNeHRbvN/PjdF/pNvqW78F+z4anQ8+VV66mZY53anA6Uk7HO9NPMxp5+/0SomfNCH2M3+kL5laXGngcEkKWoMFz5zuPmh6YvVJtet3HFkEYC6qH41vrlrsY4zLc3Gi9w7YYVobZKSyVhZvr99441oXYpuq1XN+FAfN5LqDRkcwgBZAEaPabNIr5R80RKFvBUbfp9H1r/attrSW+kaUWyusJLK0wvRF+82lrvrlj3uHm14VShXYqs3YtauPV/GtaG+nxtbvJEk22IsBKVlw/zyUJsDx4CdfE96NuTD+9an/Jlu1XsNT7gj3vq3JUTjzOP3bcS7LRb92roPMVAaG6DJKh585+tOKrPfQVTiQY2qRvOnGPZvjqpfMXt/ueWjJlsSjBqYtijfWw5jgCyANXGG3yYrAEkz7dsc2+2NaZ955uNvgZSeH7cqMpg3oEy/oNJNamm14492rIrHavcKnq5N/j8je4vxk0P2sWpmsqsOQiqje/30hWqbcfELbM+EFt8ZPZoklt5q4mk2YLnGuc1aITgl9c+OixXEc4aAWgZ6D2DqJX1ILf7G6hMd/3+Nre9o81t8oWx4wglu1Z1j1pTG/OUkuqgb1xDXhO1OdUu1x556ndXXmGodrTVtVe4rUMJMs3M0/nOKR5vWidA11kJSQlQybjXW3e49f7vPcJVwVdb3rrduZYEH0xz6q76t1yYH59eNCYYmzHciHV1ZeaO5yc+c2u2bcWeEtTu1GYdGmmnRJim36o5ot4ISas5A5fn1sg5Ze51zloZOT+WG4hK0t3becA1dbZn/Uq8z5/yxYzsM6QJMMzQDLbhtk+9BLWhs5mbl4HQCwCAAAAAAQAAAgAABAAACAAAEAAAIAAAQAAAgAAAAAEAAAIAAAQAAAgAABAAACAAAEAAAIAAAAABAAACAAAEAAAIAAAQAAAgAABAAACAAAAgKgJo5/ZAltCOAMKzlucGsoS1CCA89/LcQJZwLwIIz43+YEtZGO40dz/LCCAML5z6pUb/cok/DvIMwTBFz+4l3c8yAkhCAg/4l6X+aOJZgmGGntml3c9wxhLr6urKzBOLxf7090VP3zLOv1zlj3P9Mc8fhTxfkIHs88fb/rhPYb8v/Dt7/iNjy1mmnhgARLwJAAAIAADSxP8LMAAkl7z6o//VoQAAAABJRU5ErkJggg==")
            } else if (file.type.match(/.*doc.*/)) {
                this.emit("thumbnail", file, "data:image/png;base64,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")
            } else {
                myDropzone.emit("thumbnail", file, "data:image/png;base64,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");
                // Icon from: https://www.iconfinder.com/icons/199231/blank_extension_file_format_icon#size=256
            }
        }

        if (file.size === "Uploaded") {
            $(file.previewElement)
                .on("click", ".dz-details", showModal.bind({file: file}))
                .find("[data-dz-size]")
                .html("<strong>On Record<strong>");
        }
    });

    myDropzone.on("error", function (file, errorMessage) {
        console.log(errorMessage);
        swal({
            type: "error",
            title: "Failed!",
            text: errorMessage
        });
        this.removeFile(file);  // Remove unaccepted file on error
    });

    $.each(uploadedFiles, function (num, file) {
        file.realname = file.name;
        if(file.name.includes("/")) {
            file.name = file.name.split("/")[1];
        }
        if (file.name.match(/.*pdf.*/)) {
            file.type = "application/pdf";
        } else if (file.name.match(/.*(doc).*/)) {
            file.type = "application/msword";
        } else {
            file.type = "";
        }
        file.accepted = true;

        // Call the default addedfile event handler
        myDropzone.emit("addedfile", file);

        // Make sure that there is no progress bar, etc...
        myDropzone.emit("complete", file);

        myDropzone.files_list.push(file.id);
    });

    myDropzone.files = uploadedFiles;

    return myDropzone;
};
