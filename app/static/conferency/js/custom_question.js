function option_convert(e){return"string"==typeof e?(e=e.replace(/[\']/g,'"').replace(/u\"/g,'"'),JSON.parse(e)):e}function delete_question(e){var t=e.parentNode.parentNode.parentNode,n=t.getAttribute("data-question-id");if(!e.getAttribute("id"))var o=!0,i=n;if(o)swal({title:"Are you sure?",type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(){for(t.parentNode.removeChild(t),n++,current_question=document.getElementById("ques_"+n+".div");null!=current_question;){var e=document.getElementById("ques_"+n+".div");e.id="ques_"+(n-1)+".div",e.name="ques_"+(n-1)+".div",e.parentNode.parentNode.setAttribute("data-question-id",n-1);var o=document.getElementById("ques_"+n+".type");o.id="ques_"+(n-1)+".type",o.name="ques_"+(n-1)+".type";var s=o.value,d=document.getElementById("ques_"+n+".description");if(d.id="ques_"+(n-1)+".description",d.name="ques_"+(n-1)+".description",s<2)for(var u=0,a=document.getElementById("ques_"+n+".option_"+u);null!=a;)a.id="ques_"+(n-1)+".option_"+u,a.name="ques_"+(n-1)+".option_"+u,u++,a=document.getElementById("ques_"+n+".option_"+u);n++,current_question=document.getElementById("ques_"+n+".div")}$.ajax({type:"DELETE",url:"{{ url_for('api.delete_review_question', conference_id=conference.id) }}",contentType:"application/json",data:JSON.stringify({numid:i}),success:function(e){$.each(e,function(e,t){$('[data-question-id="'+e+'"]').attr("name",t)})}}).fail(function(e,t,n){})});else for(t.parentNode.removeChild(t),n++,current_question=document.getElementById("ques_"+n+".div");null!=current_question;){var s=document.getElementById("ques_"+n+".div");s.id="ques_"+(n-1)+".div",s.name="ques_"+(n-1)+".div",s.parentNode.parentNode.setAttribute("data-question-id",n-1);var d=document.getElementById("ques_"+n+".type");d.id="ques_"+(n-1)+".type",d.name="ques_"+(n-1)+".type";var u=d.value,a=document.getElementById("ques_"+n+".description");if(a.id="ques_"+(n-1)+".description",a.name="ques_"+(n-1)+".description",u<2)for(var p=0,l=document.getElementById("ques_"+n+".option_"+p);null!=l;)l.id="ques_"+(n-1)+".option_"+p,l.name="ques_"+(n-1)+".option_"+p,p++,l=document.getElementById("ques_"+n+".option_"+p);n++,current_question=document.getElementById("ques_"+n+".div")}}function move_question(e,t){var n=e.parentNode.parentNode.parentNode;count=n.getAttribute("data-question-id");var o=count;1==t?o++:o--;var i=document.getElementById("ques_"+count+".div"),s=document.getElementById("ques_"+o+".div");if(null!=i&&null!=s){i.id="ques_"+o+".div",i.name="ques_"+o+".div",s.id="ques_"+count+".div",s.name="ques_"+count+".div",i.parentNode.parentNode.setAttribute("data-question-id",o),s.parentNode.parentNode.setAttribute("data-question-id",count);var d=document.getElementById("ques_"+count+".type"),u=document.getElementById("ques_"+o+".type");d.id="ques_"+o+".type",d.name="ques_"+o+".type",u.id="ques_"+count+".type",u.name="ques_"+count+".type";var a=d.value,p=u.value,l=document.getElementById("ques_"+count+".description"),r=document.getElementById("ques_"+o+".description");l.id="ques_"+o+".description",l.name="ques_"+o+".description",r.id="ques_"+count+".description",r.name="ques_"+count+".description";var c=0,_=document.getElementById("ques_"+count+".option_"+c),m=document.getElementById("ques_"+o+".option_"+c);if(a<2)if(p<2){for(;null!=_&&null!=m;)_.id="ques_"+o+".option_"+c,_.name="ques_"+o+".option_"+c,m.id="ques_"+count+".option_"+c,m.name="ques_"+count+".option_"+c,c++,_=document.getElementById("ques_"+count+".option_"+c),m=document.getElementById("ques_"+o+".option_"+c);for(;null!=_;)_.id="ques_"+o+".option_"+c,_.name="ques_"+o+".option_"+c,c++,_=document.getElementById("ques_"+count+".option_"+c);for(;null!=m;)m.id="ques_"+count+".option_"+c,m.name="ques_"+count+".option_"+c,c++,m=document.getElementById("ques_"+o+".option_"+c)}else for(;null!=_;)_.id="ques_"+o+".option_"+c,_.name="ques_"+o+".option_"+c,c++,_=document.getElementById("ques_"+count+".option_"+c);else if(p<2)for(;null!=m;)m.id="ques_"+count+".option_"+c,m.name="ques_"+count+".option_"+c,c++,m=document.getElementById("ques_"+o+".option_"+c);0==t?$(i.parentNode.parentNode).insertBefore($(s.parentNode.parentNode)):$(s.parentNode.parentNode).insertBefore($(i.parentNode.parentNode))}}function add_option(e,t){for(var n=e.parentNode.parentNode.parentNode.id.split("_")[1].split(".")[0],o=e.parentNode.parentNode.nextSibling,i=0;null!=document.getElementById("ques_"+n+".option_"+i);)i++;var s=document.createElement("li");s.setAttribute("onmouseover","show_buttons(this,1)"),s.setAttribute("onmouseout","hide_buttons(this,1)"),s.setAttribute("class","row padding-bottom-5"),s.innerHTML='<input class="col-md-7 form-control required" type="text" id="ques_'+n+".option_"+i+'" name="ques_'+n+".option_"+i+'" placeholder="new option"/><div style="display:none" class="col-md-5 option_button"><span class="btn glyphicon glyphicon-arrow-up edit-button" onclick="move_option(this,0)"></span><span class="btn glyphicon glyphicon-arrow-down edit-button" onclick="move_option(this,1)"></span><span class="btn glyphicon glyphicon-trash edit-button" onclick="delete_option(this)"></span></div>',o.appendChild(s)}function delete_option(e){var t=e.parentNode.previousSibling,n=t.parentNode,o=n.parentNode,i=t.id.split("_")[1].split(".")[0],s=t.id.split("_")[2];o.removeChild(n),s++;for(var d=document.getElementById("ques_"+i+".option_"+s);null!=d;)d.id="ques_"+i+".option_"+(s-1),d.name="ques_"+i+".option_"+(s-1),s++,d=document.getElementById("ques_"+i+".option_"+s)}function move_option(e,t){var n=e.parentNode.previousSibling,o=n.id.split("_")[1].split(".")[0],i=n.id.split("_")[2],s=i;1==t?s++:s--;var d=document.getElementById("ques_"+o+".option_"+i),u=document.getElementById("ques_"+o+".option_"+s);if(null!=d&&null!=u){d.id="ques_"+o+".option_"+s,d.name="ques_"+o+".option_"+s,u.id="ques_"+o+".option_"+i,u.name="ques_"+o+".option_"+i;var a=$(d.parentNode),p=$(u.parentNode);0==t?a.insertBefore(p):p.insertBefore(a)}}function show_buttons(e,t){e.getElementsByTagName("label")[0]&&e.getElementsByTagName("label")[0].remove();var n;n=0==t?".ques_button":".option_button",$(n,e).each(function(){$(this).show()})}function hide_buttons(e,t){var n;n=0==t?".ques_button":".option_button",$(n,e).each(function(){$(this).hide()})}function add_question(e,t){if(void 0!==e.require){e.require,e.include;var n=e.desc,o=e.id,i=new Number(e.ques_type),s=e.options}else var n="",o=0,i=e,s={0:"",1:""};var d={0:"Single Choice",1:"Multiple Choice",2:"Single-Line Textbox",3:"Essay Textbox"},u=$("<div />",{class:"panel-heading",css:{minHeight:"40px",paddingTop:"5px",paddingBottom:"5px"}}),a=$("<div />",{class:"panel-body",css:{border:"none"}});if(void 0!==t)p=t;else var p=$("#ques_list > div[data-question-id]").size();var l=$("<div />",{class:"panel panel-default","data-question-id":p,name:o}),r=$("<div />",{id:"ques_"+p+".div",name:"ques_"+p+".div",class:"form-group",css:{paddingLeft:"10px"}});u.append("<h5>"+d[i]+"</h5>"),l.append(u);var c=$("<div />",{class:"row"});r.append(c);var _=$("<input />",{id:"ques_"+p+".type",name:"ques_"+p+".type",type:"Hidden",value:i,"data-require":!1,"data-include":true});if(c.append(_),i<2)m=$("<input />",{id:"ques_"+p+".description",name:"ques_"+p+".description",type:"text",class:"form-control required",placeholder:"Enter the question description",value:n,"data-rule-option_check":!0});else var m=$("<input />",{id:"ques_"+p+".description",name:"ques_"+p+".description",type:"text",class:"form-control required",placeholder:"Enter the question description",value:n});var q=$("<div />",{class:"col-md-11 padding-bottom-5"});q.append(m),c.append(q);var v=$("<div />",{class:"col-md-1",css:{paddingLeft:"0"}});c.append(v);var y=$("<div />",{class:"ibox-tools"});u.append(y);var g=$("<span />",{class:"btn glyphicon glyphicon glyphicon-arrow-down edit-button",onclick:"move_question(this,1)"}),h=$("<span />",{class:"btn glyphicon glyphicon glyphicon-arrow-up edit-button",onclick:"move_question(this,0)"}),f=$("<span />",{class:"btn glyphicon glyphicon glyphicon-trash edit-button",id:"new_"+p+".delete",onclick:"delete_question(this,"+i+")"});if(y.append(g,h,f),i<2){var b=$("<span />",{class:"btn glyphicon glyphicon glyphicon-plus edit-button",onclick:"add_option(this)"});v.append(b);var B=$("<ul />",{class:"form-inline",css:{listStyleType:"none"}});r.append(B),$.each(s,function(e,t){var n=$('<li class="row padding-bottom-5" onmouseover="show_buttons(this,1)" onmouseout="hide_buttons(this,1)"><input class="col-md-7 form-control required" type="text" id="ques_'+p+".option_"+e+'" name="ques_'+p+".option_"+e+'" placeholder="new option" value="'+t+'"/><div class="col-md-5 option_button" style="display:none"><span class="btn glyphicon glyphicon-arrow-up edit-button" onclick="move_option(this,0)"></span><span class="btn glyphicon glyphicon-arrow-down edit-button" onclick="move_option(this,1)"></span><span class="btn glyphicon glyphicon-trash edit-button" onclick="delete_option(this)"></span></div></li>');B.append(n)})}return l.append(a),a.append(r),$("#questions-submit").parent().before(l),!1}jQuery.validator.addMethod("option_check",function(e,t,n){return t.parentNode.parentNode.parentNode.getElementsByTagName("li").length>=2},"Must have at least two options"),jQuery.validator.classRuleSettings.option_check={option_check:!0};var question_type_initial_absolute_height=280,question_type_initial_relative_height=64;$(window).scroll(function(){if($(window).width()>768){var e=$(window).scrollTop();if(e>question_type_initial_absolute_height){var t=e-question_type_initial_absolute_height+question_type_initial_relative_height;$(".question-types").css("top",t+"px")}else $(".question-types").css("top","0")}});